{ "notes" : [ "<p>The <code>utl32k.sql</code> script increases the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns for the views where this is required. The script does not increase the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in some views because of the way the SQL for those views is written.</p>", "<p>The root continues to use <code>STANDARD</code> semantics even after <code>MAX_STRING_SIZE</code> is set to <code>EXTENDED</code>. The reason for setting <code>MAX_STRING_SIZE</code> to <code>EXTENDED</code> in the root is so all the PDBs in the CDB can inherit the <code>EXTENDED</code> setting from the root.</p>", "<p>The <code>utl32k.sql</code> script increases the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns for the views where this is required. The script does not increase the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in some views because of the way the SQL for those views is written.</p>", "<p>The following SQL statement can be used to reopen a PDB in migrate mode when the current container is the PDB:</p>\n<p><code>ALTER PLUGGABLE DATABASE</code> <span class=\"italic\">pdb-name</span> <code>OPEN UPGRADE;</code></p>", "<p>The <code>utl32k.sql</code> script increases the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns for the views where this is required. The script does not increase the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in some views because of the way the SQL for those views is written.</p>", "<p>The <code>utl32k.sql</code> script increases the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns for the views where this is required. The script does not increase the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in some views because of the way the SQL for those views is written.</p>", "<p>The <code>utl32k.sql</code> script increases the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns for the views where this is required. The script does not increase the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in some views because of the way the SQL for those views is written.</p>" ], "property" : { "Oracle RAC" : "Multiple instances must use the same value.", "Modifiable in a PDB" : "Yes", "Modifiable" : "<code>ALTER SYSTEM</code> ... SID='*'<a id=\"fn_1\" href=\"#fn_1\" onclick='footdisplay(1,\"Use ALTER SYSTEM only when the database is in UPGRADE mode, and run the utl32k.sql script afterward, as explained in this section. \")'><sup>Foot&nbsp;1</sup></a>", "Parameter type" : "String", "Default value" : "<code>STANDARD</code>", "Syntax" : "<code>MAX_STRING_SIZE = { STANDARD | EXTENDED }</code>", "Basic" : "No" }, "section" : "<p class=\"tablefootnote\"><sup class=\"tablefootnote\">Footnote&nbsp;1</sup></p>\n<p>Use ALTER SYSTEM only when the database is in UPGRADE mode, and run the utl32k.sql script afterward, as explained in this section.</p>\n<div class=\"section\">\n<p><code>MAX_STRING_SIZE</code> controls the maximum size of <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> data types in SQL.</p>\n<p><code>STANDARD</code> means that the length limits for Oracle Database releases prior to Oracle Database 12<span class=\"italic\">c</span> apply (for example, 4000 bytes for <code>VARCHAR</code>2 and <code>NVARCHAR2</code>, and 2000 bytes for <code>RAW</code>).</p>\n<p><code>EXTENDED</code> means that the 32767 byte limit introduced in Oracle Database 12<span class=\"italic\">c</span> applies.</p>\n<p>The <code>COMPATIBLE</code> initialization parameter must be set to <code>12.0.0.0</code> or higher to set <code>MAX_STRING_SIZE</code> = <code>EXTENDED</code>.</p>\n<p>You can change the value of <code>MAX_STRING_SIZE</code> from <code>STANDARD</code> to <code>EXTENDED</code>. However, you cannot change the value of <code>MAX_STRING_SIZE</code> from <code>EXTENDED</code> to <code>STANDARD</code>.</p>\n<p>By setting <code>MAX_STRING_SIZE</code> = <code>EXTENDED</code>, users are taking an explicit action that could introduce application incompatibility in their database. Applications that do not want to use the expanded data types can be rewritten for compatibility with either setting; for example, these applications could use explicit CASTs to fix the length of <code>VARCHAR2</code> expressions during <code>CREATE TABLE AS SELECT</code>.</p>\n<p>Altering <code>MAX_STRING_SIZE</code> will update database objects and possibly invalidate them, as follows:</p>\n<ul style=\"list-style-type: disc;\">\n<li>\n<p>Tables with virtual columns will be updated with new data type metadata for virtual columns of <code>VARCHAR2(4000)</code>, 4000-byte <code>NVARCHAR2</code>, or <code>RAW(2000)</code> type.</p>\n<ul style=\"list-style-type: disc;\">\n<li>\n<p>Functional indexes will become unusable if a change to their associated virtual columns causes the index key to exceed index key length limits. Attempts to rebuild such indexes will fail with <code>ORA-01450: maximum key length exceeded</code>.</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Views will be invalidated if they contain <code>VARCHAR2(4000)</code>, 4000-byte <code>NVARCHAR2</code>, or <code>RAW(2000)</code> typed expression columns.</p>\n</li>\n<li>\n<p>Materialized views will be updated with new metadata <code>VARCHAR2(4000)</code>, 4000-byte <code>NVARCHAR2</code>, and <code>RAW(2000)</code> typed expression columns</p>\n</li>\n</ul>\n</div>\n<!-- class=\"section\" -->\n<div class=\"section\">\n<p class=\"subhead1\">Increasing the Maximum Size of VARCHAR2, NVARCHAR2, and RAW Columns in a Non-CDB</p>\n</div>\n<!-- class=\"section\" -->\n<div class=\"section\">\n<p>To increase the maximum size of <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in a non-CDB:</p>\n<ol>\n<li>\n<p>Shut down the database.</p>\n</li>\n<li>\n<p>Restart the database in <code>UPGRADE</code> mode.</p>\n</li>\n<li>\n<p>Change the setting of <code>MAX_STRING_SIZE</code> to <code>EXTENDED</code>.</p>\n</li>\n<li>\n<p>Run the <code>rdbms/admin/utl32k.sql</code> script. You must be connected <code>AS SYSDBA</code> to run the script.</p>\n</li>\n<li>\n<p>Restart the database in <code>NORMAL</code> mode.</p>\n<div class=\"infobox-note\" id=\"GUID-D424D23B-0933-425F-BC69-9C0E6724693C__GUID-C364053B-189F-4C86-A41E-CAE66FF1DBAC\">\n<p class=\"notep1\">Note:</p>\n<p>The <code>utl32k.sql</code> script increases the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns for the views where this is required. The script does not increase the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in some views because of the way the SQL for those views is written.</p>\n</div>\n</li>\n<li>\n<p>Run the <code>rdbms/admin/utlrp.sql</code> script to recompile invalid objects. You must be connected <code>AS SYSDBA</code> to run the script.</p>\n</li>\n</ol>\n</div>\n<!-- class=\"section\" -->\n<div class=\"section\">\n<p class=\"subhead1\">Increasing the Maximum Size of VARCHAR2, NVARCHAR2, and RAW Columns in a CDB</p>\n<p>To increase the maximum size of <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in a CDB and in all the PDBs in the CDB:</p>\n<ol>\n<li>\n<p>Connect to the CDB AS SYSDBA.</p>\n</li>\n<li>\n<p>In the root, change the setting of <code>MAX_STRING_SIZE</code> to <code>EXTENDED</code>:</p>\n<pre >\nALTER SESSION SET CONTAINER=CDB$ROOT;\nALTER SYSTEM SET max_string_size=extended SCOPE=SPFILE;\n</pre>\n<div class=\"infobox-note\" id=\"GUID-D424D23B-0933-425F-BC69-9C0E6724693C__GUID-90E4E174-5F55-4DD3-902A-081F0B359EDB\">\n<p class=\"notep1\">Note:</p>\n<p>The root continues to use <code>STANDARD</code> semantics even after <code>MAX_STRING_SIZE</code> is set to <code>EXTENDED</code>. The reason for setting <code>MAX_STRING_SIZE</code> to <code>EXTENDED</code> in the root is so all the PDBs in the CDB can inherit the <code>EXTENDED</code> setting from the root.</p>\n</div>\n</li>\n<li>\n<p>Shut down the CDB.</p>\n</li>\n<li>\n<p>Restart the CDB in UPGRADE mode.</p>\n<pre dir=\"ltr\">\nstartup upgrade;\n</pre></li>\n<li>\n<p>Open all the PDBs in migrate mode and then exit the database:</p>\n<pre dir=\"ltr\">\nALTER PLUGGABLE DATABASE ALL OPEN UPGRADE;\nEXIT;\n</pre></li>\n<li>\n<p>Use the <code>catcon.pl</code> script to run the <code>rdbms/admin/utl32k.sql</code> script in the root and in all the PDBs in the CDB to increase the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns. Enter the SYS password when prompted:</p>\n<pre dir=\"ltr\">\n$ cd $ORACLE_HOME/rdbms/admin\n$ mkdir /scratch/mydir/utl32k_cdb_pdbs_output\n$ $ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -u SYS \n-d $ORACLE_HOME/rdbms/admin -l '/scratch/mydir/utl32k_cdb_pdbs_output' -b \nutl32k_cdb_pdbs_output utl32k.sql\ncatcon: ALL catcon-related output will be written to [/scratch/mydir/utl32k_cdb_pdbs_output/utl32k_cdb_pdbs_output_catcon_23172.lst]\ncatcon: See [/scratch/mydir/utl32k_cdb_pdbs_output/utl32k_cdb_pdbs_output*.log] files for output generated by scripts\ncatcon: See [/scratch/mydir/utl32k_cdb_pdbs_output/utl32k_cdb_pdbs_output_*.lst] files for spool files, if any\nEnter Password: \ncatcon.pl: completed successfully\n$\n</pre>\n<div class=\"infobox-note\" id=\"GUID-D424D23B-0933-425F-BC69-9C0E6724693C__GUID-82536E05-CC37-44B9-8080-3A4147443617\">\n<p class=\"notep1\">Note:</p>\n<p>The <code>utl32k.sql</code> script increases the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns for the views where this is required. The script does not increase the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in some views because of the way the SQL for those views is written.</p>\n</div>\n</li>\n<li>\n<p>Connect to the CDB AS SYSDBA and shut down the database.</p>\n</li>\n<li>\n<p>Restart the CDB in NORMAL mode.</p>\n<pre dir=\"ltr\">\nstartup;\n</pre></li>\n<li>\n<p>Open all the PDBs in the CDB:</p>\n<pre dir=\"ltr\">\nALTER PLUGGABLE DATABASE ALL OPEN READ WRITE;\n</pre></li>\n<li>\n<p>Use the <code>catcon.pl</code> script to run the <code>rdbms/admin/utlrp.sql</code> script to recompile invalid objects in the root and in all the PDBs in the CDB. Enter the SYS password when prompted:</p>\n<pre dir=\"ltr\">\n$ cd $ORACLE_HOME/rdbms/admin\n$ mkdir /scratch/mydir/utlrp_cdb_pdbs_output\n$ $ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -u SYS -d $ORACLE_HOME/rdbms/admin -l '/scratch/mydir/utlrp_cdb_pdbs_output' -b utlrp_cdb_pdbs_output utlrp.sql\ncatcon: ALL catcon-related output will be written to [/scratch/mydir/utlrp_cdb_pdbs_output/utlrp_cdb_pdbs_output_catcon_24271.lst]\ncatcon: See [/scratch/mydir/utlrp_cdb_pdbs_output/utlrp_cdb_pdbs_output*.log] files for output generated by scripts\ncatcon: See [/scratch/mydir/utlrp_cdb_pdbs_output/utlrp_cdb_pdbs_output_*.lst] files for spool files, if any\nEnter Password: \ncatcon.pl: completed successfully\n$\n</pre></li>\n</ol>\n<div class=\"infoboxnotealso\" id=\"GUID-D424D23B-0933-425F-BC69-9C0E6724693C__GUID-2E575F69-E9B3-4919-BAFC-3E5632E0CA9C\">\n<p class=\"notep1\">See Also:</p>\n<p><a class=\"olink ADMIN-GUID-E307DC5F-52A9-4B1B-8999-3E60867009D4\" target=\"_blank\" href=\"../ADMIN/administering-a-cdb-with-sql-plus.htm#ADMIN-GUID-E307DC5F-52A9-4B1B-8999-3E60867009D4\"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about using the <code>catcon.pl</code> script to run Oracle-supplied scripts in a CDB and PDBs.</p>\n</div>\n</div>\n<!-- class=\"section\" -->\n<div class=\"section\">\n<p class=\"subhead1\">Increasing the Maximum Size of VARCHAR2, NVARCHAR2, and RAW Columns in a PDB</p>\n</div>\n<!-- class=\"section\" -->\n<div class=\"section\">\n<p>To increase the maximum size of <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in a PDB:</p>\n<ol>\n<li>\n<p>Shut down the PDB.</p>\n</li>\n<li>\n<p>Reopen the PDB in migrate mode.</p>\n<div class=\"infobox-note\" id=\"GUID-D424D23B-0933-425F-BC69-9C0E6724693C__GUID-5904BB72-0700-4DFD-AD55-DE5D62E4A407\">\n<p class=\"notep1\">Note:</p>\n<p>The following SQL statement can be used to reopen a PDB in migrate mode when the current container is the PDB:</p>\n<p><code>ALTER PLUGGABLE DATABASE</code> <span class=\"italic\">pdb-name</span> <code>OPEN UPGRADE;</code></p>\n</div>\n</li>\n<li>\n<p>Change the setting of <code>MAX_STRING_SIZE</code> in the PDB to <code>EXTENDED</code>.</p>\n</li>\n<li>\n<p>Run the <code>rdbms/admin/utl32k.sql</code> script in the PDB. You must be connected <code>AS SYSDBA</code> to run the <code>utl32k.sql</code> script.</p>\n</li>\n<li>\n<p>Reopen the PDB in <code>NORMAL</code> mode.</p>\n<div class=\"infobox-note\" id=\"GUID-D424D23B-0933-425F-BC69-9C0E6724693C__GUID-E6D90F9B-0E29-486A-B4F2-2B14D8E91AFC\">\n<p class=\"notep1\">Note:</p>\n<p>The <code>utl32k.sql</code> script increases the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns for the views where this is required. The script does not increase the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in some views because of the way the SQL for those views is written.</p>\n</div>\n</li>\n<li>\n<p>Run the <code>rdbms/admin/utlrp.sql</code> script in the PDB to recompile invalid objects. You must be connected <code>AS SYSDBA</code> to run the script.</p>\n</li>\n</ol>\n<div class=\"infoboxnotealso\" id=\"GUID-D424D23B-0933-425F-BC69-9C0E6724693C__GUID-41F0E2B5-7A3A-467C-9C05-1FB0B894BCB8\">\n<p class=\"notep1\">See Also:</p>\n<p><a class=\"olink ADMIN13632\" target=\"_blank\" href=\"../ADMIN/administering-a-cdb-with-sql-plus.htm#ADMIN13632\"><span class=\"italic\">Oracle Database Administrator's Guide</span></a> for more information about modifying the open mode of PDBs.</p>\n</div>\n</div>\n<!-- class=\"section\" -->\n<div class=\"section\">\n<p class=\"subhead1\">Increasing the Maximum Size of VARCHAR2, NVARCHAR2, and RAW Columns in an Oracle RAC Database</p>\n</div>\n<!-- class=\"section\" -->\n<div class=\"section\">\n<p>To increase the maximum size of <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in an Oracle RAC database:</p>\n<ol>\n<li>\n<p>Shut down all of the Oracle RAC database instances, except one.</p>\n</li>\n<li>\n<p>Restart the Oracle RAC database instance in <code>UPGRADE</code> mode.</p>\n</li>\n<li>\n<p>Change the setting of <code>MAX_STRING_SIZE</code> to <code>EXTENDED</code>.</p>\n</li>\n<li>\n<p>Run the <code>rdbms/admin/utl32k.sql</code> script in the Oracle RAC database instance. You must be connected <code>AS SYSDBA</code> to run the script.</p>\n</li>\n<li>\n<p>Restart all Oracle RAC database instances in <code>NORMAL</code> mode.</p>\n<div class=\"infobox-note\" id=\"GUID-D424D23B-0933-425F-BC69-9C0E6724693C__GUID-2B6A4D55-589D-4452-946B-9D0823F88A67\">\n<p class=\"notep1\">Note:</p>\n<p>The <code>utl32k.sql</code> script increases the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns for the views where this is required. The script does not increase the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in some views because of the way the SQL for those views is written.</p>\n</div>\n</li>\n<li>\n<p>Run the <code>rdbms/admin/utlrp.sql</code> script to recompile invalid objects. You must be connected <code>AS SYSDBA</code> to run the script.</p>\n</li>\n</ol>\n</div>\n<!-- class=\"section\" -->\n<div class=\"section\">\n<p class=\"subhead1\">Increasing the Maximum Size of VARCHAR2, NVARCHAR2, and RAW Columns in an Oracle Data Guard Logical Standby Database</p>\n</div>\n<!-- class=\"section\" -->\n<div class=\"section\">\n<p>To increase the maximum size of <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in an Oracle Data Guard logical standby database:</p>\n<ol>\n<li>\n<p>Shut down the Oracle Data Guard primary database and logical standby database.</p>\n</li>\n<li>\n<p>Restart the primary database and logical standby database in <code>UPGRADE</code> mode.</p>\n</li>\n<li>\n<p>Change the setting of <code>MAX_STRING_SIZE</code> to <code>EXTENDED</code> on the primary database and logical standby database.</p>\n</li>\n<li>\n<p>Run the <code>rdbms/admin/utl32k.sql</code> script on both the primary database and the logical standby database. You must be connected <code>AS SYSDBA</code> to run the script.</p>\n</li>\n<li>\n<p>Restart the primary database and logical standby database in <code>NORMAL</code> mode.</p>\n<div class=\"infobox-note\" id=\"GUID-D424D23B-0933-425F-BC69-9C0E6724693C__GUID-6331CEC9-6F8B-457C-8D15-4377195A7B7B\">\n<p class=\"notep1\">Note:</p>\n<p>The <code>utl32k.sql</code> script increases the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns for the views where this is required. The script does not increase the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> columns in some views because of the way the SQL for those views is written.</p>\n</div>\n</li>\n<li>\n<p>Run the <code>rdbms/admin/utlrp.sql</code> script on the primary database and logical standby database to recompile invalid objects. You must be connected <code>AS SYSDBA</code> to run the script.</p>\n</li>\n<li>\n<p>Restart SQL Apply.</p>\n</li>\n</ol>\n<div class=\"infoboxnotealso\" id=\"GUID-D424D23B-0933-425F-BC69-9C0E6724693C__GUID-B10BBBEC-7F35-4D66-8134-F09326FE1782\">\n<p class=\"notep1\">See Also:</p>\n<p><a class=\"olink NLSPG977\" target=\"_blank\" href=\"../NLSPG/linguistic-sorting-and-matching.htm#NLSPG977\"><span class=\"italic\">Oracle Database Globalization Support Guide</span></a> for more information about the <code>MAX_STRING_SIZE</code> parameter</p>\n</div>\n</div>\n<!-- class=\"section\" --></div>\n</div>\n<!-- class=\"ind\" --><!-- Start Footer -->\n</div>\n<!-- add extra wrapper close div-->", "seealso" : [ "<p><a class=\"olink ADMIN-GUID-E307DC5F-52A9-4B1B-8999-3E60867009D4\" target=\"_blank\" href=\"../ADMIN/administering-a-cdb-with-sql-plus.htm#ADMIN-GUID-E307DC5F-52A9-4B1B-8999-3E60867009D4\"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about using the <code>catcon.pl</code> script to run Oracle-supplied scripts in a CDB and PDBs.</p>", "<p><a class=\"olink ADMIN13632\" target=\"_blank\" href=\"../ADMIN/administering-a-cdb-with-sql-plus.htm#ADMIN13632\"><span class=\"italic\">Oracle Database Administrator's Guide</span></a> for more information about modifying the open mode of PDBs.</p>", "<p><a class=\"olink NLSPG977\" target=\"_blank\" href=\"../NLSPG/linguistic-sorting-and-matching.htm#NLSPG977\"><span class=\"italic\">Oracle Database Globalization Support Guide</span></a> for more information about the <code>MAX_STRING_SIZE</code> parameter</p>" ] }